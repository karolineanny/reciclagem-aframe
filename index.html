<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <title>Reciclagem em A-Frame</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

    <!-- Global Game Logic -->
    <script src="js/app.js"></script>

    <!-- Components -->
    <script src="js/components/recyclable.js"></script>
    <script src="js/components/bin-zone.js"></script>
    <script src="js/components/reset-game.js"></script>
    <script src="js/components/ground-align.js"></script>
    <script src="js/components/game-manager.js"></script>
    <script src="js/components/scatter-model.js"></script>
    <script src="js/components/fix-vegetation.js"></script>
    <script src="js/components/perimeter-scatter.js"></script>
    <script src="js/components/wavy-ground.js"></script>
    <script src="js/components/forest-scatter.js"></script>
    <script src="js/components/distant-hills.js"></script>
</head>

<body>
    <div id="intro">
        <div class="intro-box">
            <h1>Reciclagem VR ♻️</h1>
            <p>
                Bem-vindo ao simulador de reciclagem!<br><br>
                <strong>Como jogar:</strong><br>
                1. Ande pelo ambiente usando W, A, S, D.<br>
                2. Encontre lixos espalhados no chão.<br>
                3. Clique no lixo para pegar.<br>
                4. Leve até a lixeira da cor correta e solte.<br><br>
                Ajude a limpar o ambiente!
            </p>
            <button id="btnStart" class="btn-start">COMEÇAR</button>
        </div>
    </div>

    <div id="gameOver" style="display: none;">
        <div class="intro-box">
            <h1 id="gameOverTitle">Fim de Jogo</h1>
            <p id="finalScore" style="font-size: 1.5rem; font-weight: bold; color: white;">Pontuação Final: 0</p>
            <button id="btnRestart" class="btn-start">JOGAR NOVAMENTE</button>
        </div>
    </div>

    <a-scene game-manager renderer="colorManagement: true; physicallyCorrectLights: true; shadowMapEnabled: true"
        fog="type: exponential; color: #bfe7ff; density: 0.018" background="color: #cfefff">

        <a-assets>
            <a-asset-item id="grassPatch" src="assets/models/grass_patch.glb"></a-asset-item>
            <a-asset-item id="bottlePlastic" src="assets/models/bottle_plastic.glb"></a-asset-item>
            <a-asset-item id="bottleGlass" src="assets/models/bottle.glb"></a-asset-item>
            <a-asset-item id="canMetal" src="assets/models/can.glb"></a-asset-item>

        </a-assets>

        <a-entity light="type: ambient; intensity: 0.45; color: #ffffff"></a-entity>
        <a-entity light="type: directional; intensity: 1.05; color: #fff6db" position="8 14 6"
            shadow="cast: true; mapSizeWidth: 2048; mapSizeHeight: 2048; cameraLeft: -40; cameraRight: 40; cameraTop: 40; cameraBottom: -40">
        </a-entity>

        <a-sky color="#9ad6ff"></a-sky>

        <a-entity distant-hills="count: 12"></a-entity>

        <a-entity id="ground"
            geometry="primitive: plane; width: 100; height: 100; segmentsWidth: 150; segmentsHeight: 150"
            rotation="-90 0 0" material="color: #224a1e; roughness: 1; metalness: 0; side: double; transparent: false"
            wavy-ground="amp: 0.40; freq: 0.22; amp2: 0.18; freq2: 0.75; seed: 11" shadow="receive: true">
        </a-entity>

        <a-entity
            scatter-model="model: #grassPatch; count: 2000; areaX: 90; areaZ: 90; groundY: 0; extraOffset: 0.01; minScale: 0.7; maxScale: 1.35">
        </a-entity>

        <a-entity
            perimeter-scatter="model: #bush; countPerSide: 18; width: 56; depth: 56; groundY: 0; extraOffset: 0; skipFront: false">
        </a-entity>

        <a-entity forest-scatter="count: 400; radiusMin: 32; radiusMax: 48; groundY: 0"></a-entity>

        <a-entity id="rig" movement-controls="constrainToNavMesh: false; speed: 0.3" position="0 4 14">
            <a-entity id="camera" camera look-controls position="0 0 0">
                <a-entity id="hand"></a-entity>

                <a-entity position="0 0 -1" geometry="primitive: ring; radiusInner: 0.012; radiusOuter: 0.018"
                    material="color: #e5e7eb; shader: flat; opacity: 0.85" cursor="fuse: false"
                    raycaster="objects: .pickable, .clickable"></a-entity>

                <a-text id="msgText" value="" position="0 -0.5 -1" align="center" width="2" color="#FFF"></a-text>

            </a-entity>

            <a-entity id="leftHand" laser-controls="hand: left"
                raycaster="objects: .pickable, .clickable; far: 5"></a-entity>
            <a-entity id="rightHand" laser-controls="hand: right"
                raycaster="objects: .pickable, .clickable; far: 5"></a-entity>
        </a-entity>

        <a-entity id="bins" position="0 0.5 -8">

            <a-box position="0 0.05 0" width="7.2" height="0.1" depth="1.8"
                material="color: #1f2937; roughness: 1; metalness: 0" shadow="receive: true"></a-box>

            <a-entity class="clickable" position="-2.4 0 0" bin-zone="accepts: paper; label: PAPEL (Azul)">
                <a-box class="binBody" position="0 0.65 0" width="1.2" height="1.3" depth="0.9"
                    material="color: #2563eb; roughness: 0.9; metalness: 0.05" shadow="cast: true; receive: true">
                </a-box>
                <a-box position="0 1.35 0" width="1.25" height="0.18" depth="0.95"
                    material="color: #1d4ed8; roughness: 0.9; metalness: 0.05" shadow="cast: true"></a-box>
                <a-box position="0 1.35 0.18" width="0.75" height="0.06" depth="0.25"
                    material="color: #0b1220; roughness: 1; metalness: 0"></a-box>
            </a-entity>

            <a-entity class="clickable" position="-0.8 0 0" bin-zone="accepts: plastic; label: PLÁSTICO (Vermelho)">
                <a-box class="binBody" position="0 0.65 0" width="1.2" height="1.3" depth="0.9"
                    material="color: #dc2626; roughness: 0.9; metalness: 0.05" shadow="cast: true; receive: true">
                </a-box>
                <a-box position="0 1.35 0" width="1.25" height="0.18" depth="0.95"
                    material="color: #b91c1c; roughness: 0.9; metalness: 0.05" shadow="cast: true"></a-box>
                <a-cylinder position="0 1.35 0.18" radius="0.22" height="0.08"
                    material="color: #0b1220; roughness: 1; metalness: 0"></a-cylinder>
            </a-entity>

            <a-entity class="clickable" position="0.8 0 0" bin-zone="accepts: glass; label: VIDRO (Verde)">
                <a-box class="binBody" position="0 0.65 0" width="1.2" height="1.3" depth="0.9"
                    material="color: #16a34a; roughness: 0.9; metalness: 0.05" shadow="cast: true; receive: true">
                </a-box>
                <a-box position="0 1.35 0" width="1.25" height="0.18" depth="0.95"
                    material="color: #15803d; roughness: 0.9; metalness: 0.05" shadow="cast: true"></a-box>
                <a-box position="0 1.35 0.18" width="0.55" height="0.06" depth="0.35"
                    material="color: #0b1220; roughness: 1; metalness: 0"></a-box>
            </a-entity>

            <a-entity class="clickable" position="2.4 0 0" bin-zone="accepts: metal; label: METAL (Amarelo)">
                <a-box class="binBody" position="0 0.65 0" width="1.2" height="1.3" depth="0.9"
                    material="color: #facc15; roughness: 0.85; metalness: 0.1" shadow="cast: true; receive: true">
                </a-box>
                <a-box position="0 1.35 0" width="1.25" height="0.18" depth="0.95"
                    material="color: #eab308; roughness: 0.85; metalness: 0.1" shadow="cast: true"></a-box>
                <a-cylinder position="0 1.35 0.18" radius="0.28" height="0.08"
                    material="color: #0b1220; roughness: 1; metalness: 0"></a-cylinder>
            </a-entity>

        </a-entity>

        <a-entity id="itemZone" position="0 0 0">

            <a-entity position="-8 0.4 6" rotation="0 45 0" recyclable="type: glass; name: Garrafa de Vidro">
                <a-entity gltf-model="#bottleGlass" scale="3.5 3.5 3.5"
                    material="color: #22c55e; side: double; transparent: true; opacity: 0.8">
                </a-entity>
                <a-entity class="arrow" position="0 1.8 0"
                    animation="property: position; to: 0 2.2 0; dir: alternate; loop: true; dur: 1000; easing: easeInOutSine">
                    <a-cone radius-bottom="0.01" radius-top="0.15" height="0.3" color="#ffff00" rotation="180 0 0"
                        material="emissive: #ff0; emissiveIntensity: 0.5"></a-cone>
                </a-entity>
            </a-entity>

            <a-entity position="10 0.4 -5" rotation="0 -30 0" recyclable="type: plastic; name: Garrafa Plastica">
                <a-entity gltf-model="#bottlePlastic" scale="0.3 0.3 0.3"
                    material="color: #3b82f6; side: double; transparent: true; opacity: 0.8">
                </a-entity>
                <a-entity class="arrow" position="0 1.8 0"
                    animation="property: position; to: 0 2.2 0; dir: alternate; loop: true; dur: 1000; easing: easeInOutSine; delay: 250">
                    <a-cone radius-bottom="0.01" radius-top="0.15" height="0.3" color="#ffff00" rotation="180 0 0"
                        material="emissive: #ff0; emissiveIntensity: 0.5"></a-cone>
                </a-entity>
            </a-entity>

            <a-entity position="-4 0.4 -12" rotation="0 0 0" recyclable="type: metal; name: Lata de Metal">
                <a-entity gltf-model="#canMetal" scale="0.5 1.5 0.5" material="side: double"></a-entity>

                <a-entity class="arrow" position="0 1.8 0"
                    animation="property: position; to: 0 2.2 0; dir: alternate; loop: true; dur: 1000; easing: easeInOutSine; delay: 500">
                    <a-cone radius-bottom="0.01" radius-top="0.15" height="0.3" color="#ffff00" rotation="180 0 0"
                        material="emissive: #ff0; emissiveIntensity: 0.5"></a-cone>
                </a-entity>
            </a-entity>

            <a-entity position="6 0.4 10" rotation="0 0 0" recyclable="type: paper; name: Papel Amassado">
                <a-icosahedron radius="0.2" color="#f1f5f9" detail="1" flat-shading="true" scale="1 0.8 1">
                </a-icosahedron>

                <a-entity class="arrow" position="0 1.8 0"
                    animation="property: position; to: 0 2.2 0; dir: alternate; loop: true; dur: 1000; easing: easeInOutSine; delay: 750">
                    <a-cone radius-bottom="0.01" radius-top="0.15" height="0.3" color="#ffff00" rotation="180 0 0"
                        material="emissive: #ff0; emissiveIntensity: 0.5"></a-cone>
                </a-entity>
            </a-entity>

        </a-entity>

    </a-scene>

</body>

</html>